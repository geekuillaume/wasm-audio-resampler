"use strict";
/// <reference types="emscripten" />
Object.defineProperty(exports, "__esModule", { value: true });
exports.limitConcurrency = exports.memoize = exports.bytesPerDatatypeSample = exports.SoxrQuality = exports.SoxrDatatype = void 0;
var SoxrDatatype;
(function (SoxrDatatype) {
    SoxrDatatype[SoxrDatatype["SOXR_FLOAT32"] = 0] = "SOXR_FLOAT32";
    SoxrDatatype[SoxrDatatype["SOXR_FLOAT64"] = 1] = "SOXR_FLOAT64";
    SoxrDatatype[SoxrDatatype["SOXR_INT32"] = 2] = "SOXR_INT32";
    SoxrDatatype[SoxrDatatype["SOXR_INT16"] = 3] = "SOXR_INT16";
})(SoxrDatatype = exports.SoxrDatatype || (exports.SoxrDatatype = {}));
;
var SoxrQuality;
(function (SoxrQuality) {
    SoxrQuality[SoxrQuality["SOXR_QQ"] = 0] = "SOXR_QQ";
    SoxrQuality[SoxrQuality["SOXR_LQ"] = 1] = "SOXR_LQ";
    SoxrQuality[SoxrQuality["SOXR_MQ"] = 2] = "SOXR_MQ";
    SoxrQuality[SoxrQuality["SOXR_HQ"] = 4] = "SOXR_HQ";
    SoxrQuality[SoxrQuality["SOXR_VHQ"] = 6] = "SOXR_VHQ";
})(SoxrQuality = exports.SoxrQuality || (exports.SoxrQuality = {}));
exports.bytesPerDatatypeSample = {
    [SoxrDatatype.SOXR_FLOAT32]: 4,
    [SoxrDatatype.SOXR_FLOAT64]: 8,
    [SoxrDatatype.SOXR_INT32]: 4,
    [SoxrDatatype.SOXR_INT16]: 2,
};
exports.memoize = (fct) => {
    let res = null;
    const resolver = (...args) => {
        if (res) {
            return res;
        }
        res = fct(...args);
        return res;
    };
    return resolver;
};
exports.limitConcurrency = (fct) => {
    let currentCall = null;
    const resolver = async (...args) => {
        if (currentCall) {
            await currentCall;
        }
        currentCall = fct(...args);
        const res = await currentCall;
        currentCall = null;
        return res;
    };
    return resolver;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXMiOlsidXRpbHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLG9DQUFvQzs7O0FBRXBDLElBQVksWUFLWDtBQUxELFdBQVksWUFBWTtJQUN0QiwrREFBZ0IsQ0FBQTtJQUNoQiwrREFBZ0IsQ0FBQTtJQUNoQiwyREFBYyxDQUFBO0lBQ2QsMkRBQWMsQ0FBQTtBQUNoQixDQUFDLEVBTFcsWUFBWSxHQUFaLG9CQUFZLEtBQVosb0JBQVksUUFLdkI7QUFBQSxDQUFDO0FBRUYsSUFBWSxXQU1YO0FBTkQsV0FBWSxXQUFXO0lBQ3JCLG1EQUFXLENBQUE7SUFDWCxtREFBVyxDQUFBO0lBQ1gsbURBQVcsQ0FBQTtJQUNYLG1EQUFXLENBQUE7SUFDWCxxREFBWSxDQUFBO0FBQ2QsQ0FBQyxFQU5XLFdBQVcsR0FBWCxtQkFBVyxLQUFYLG1CQUFXLFFBTXRCO0FBRVksUUFBQSxzQkFBc0IsR0FBRztJQUNwQyxDQUFDLFlBQVksQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDO0lBQzlCLENBQUMsWUFBWSxDQUFDLFlBQVksQ0FBQyxFQUFFLENBQUM7SUFDOUIsQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQztJQUM1QixDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDO0NBQzdCLENBQUM7QUFxQ1csUUFBQSxPQUFPLEdBQUcsQ0FBa0MsR0FBTSxFQUFNLEVBQUU7SUFDckUsSUFBSSxHQUFHLEdBQWtCLElBQUksQ0FBQztJQUM5QixNQUFNLFFBQVEsR0FBRyxDQUFDLEdBQUcsSUFBSSxFQUFFLEVBQUU7UUFDM0IsSUFBSSxHQUFHLEVBQUU7WUFDUCxPQUFPLEdBQUcsQ0FBQztTQUNaO1FBQ0QsR0FBRyxHQUFHLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQyxDQUFDO1FBQ25CLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQyxDQUFDO0lBQ0YsT0FBTyxRQUFhLENBQUM7QUFDdkIsQ0FBQyxDQUFBO0FBRVksUUFBQSxnQkFBZ0IsR0FBRyxDQUEyQyxHQUFNLEVBQUssRUFBRTtJQUN0RixJQUFJLFdBQVcsR0FBRyxJQUFJLENBQUM7SUFDdkIsTUFBTSxRQUFRLEdBQUcsS0FBSyxFQUFFLEdBQUcsSUFBSSxFQUFFLEVBQUU7UUFDakMsSUFBSSxXQUFXLEVBQUU7WUFDZixNQUFNLFdBQVcsQ0FBQztTQUNuQjtRQUNELFdBQVcsR0FBRyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQztRQUMzQixNQUFNLEdBQUcsR0FBRyxNQUFNLFdBQVcsQ0FBQztRQUM5QixXQUFXLEdBQUcsSUFBSSxDQUFDO1FBQ25CLE9BQU8sR0FBRyxDQUFDO0lBQ2IsQ0FBQyxDQUFDO0lBQ0YsT0FBTyxRQUFhLENBQUM7QUFDdkIsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgdHlwZXM9XCJlbXNjcmlwdGVuXCIgLz5cblxuZXhwb3J0IGVudW0gU294ckRhdGF0eXBlIHtcbiAgU09YUl9GTE9BVDMyID0gMCxcbiAgU09YUl9GTE9BVDY0ID0gMSxcbiAgU09YUl9JTlQzMiA9IDIsXG4gIFNPWFJfSU5UMTYgPSAzLFxufTtcblxuZXhwb3J0IGVudW0gU294clF1YWxpdHkge1xuICBTT1hSX1FRID0gMCxcbiAgU09YUl9MUSA9IDEsXG4gIFNPWFJfTVEgPSAyLFxuICBTT1hSX0hRID0gNCxcbiAgU09YUl9WSFEgPSA2LFxufVxuXG5leHBvcnQgY29uc3QgYnl0ZXNQZXJEYXRhdHlwZVNhbXBsZSA9IHtcbiAgW1NveHJEYXRhdHlwZS5TT1hSX0ZMT0FUMzJdOiA0LFxuICBbU294ckRhdGF0eXBlLlNPWFJfRkxPQVQ2NF06IDgsXG4gIFtTb3hyRGF0YXR5cGUuU09YUl9JTlQzMl06IDQsXG4gIFtTb3hyRGF0YXR5cGUuU09YUl9JTlQxNl06IDIsXG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIEVtc2NyaXB0ZW5Nb2R1bGVTb3hyIGV4dGVuZHMgRW1zY3JpcHRlbk1vZHVsZSB7XG4gIF9zb3hyX2NyZWF0ZShcbiAgICBpbnB1dFJhdGU6IG51bWJlcixcbiAgICBvdXRwdXRSYXRlOiBudW1iZXIsXG4gICAgbnVtX2NoYW5uZWxzOiBudW1iZXIsXG4gICAgZXJyUHRyOiBudW1iZXIsXG4gICAgaW9TcGVjUHRyOiBudW1iZXIsXG4gICAgcXVhbGl0eVNwZWNQdHI6IG51bWJlcixcbiAgICBydW50aW1lU3BlY1B0cjogbnVtYmVyLFxuICApOiBudW1iZXI7XG4gIF9zb3hyX2RlbGV0ZShyZXNhbXBsZXJQdHI6IG51bWJlcik6IHZvaWQ7XG4gIF9zb3hyX3Byb2Nlc3MoXG4gICAgcmVzYW1wbGVyUHRyOiBudW1iZXIsXG4gICAgaW5CdWZQdHI6IG51bWJlcixcbiAgICBpbkxlbjogbnVtYmVyLFxuICAgIGluQ29uc3VtbWVkTGVuUHRyOiBudW1iZXIsXG4gICAgb3V0QnVmUHRyOiBudW1iZXIsXG4gICAgb3V0TGVuOiBudW1iZXIsXG4gICAgb3V0RW1pdHRlZExlblB0cjogbnVtYmVyLFxuICApOiBudW1iZXI7XG4gIF9zb3hyX2lvX3NwZWMoXG4gICAgaW9TcGVjUHRyOiBudW1iZXIsXG4gICAgaXR5cGU6IG51bWJlcixcbiAgICBvdHlwZTogbnVtYmVyLFxuICApOiB2b2lkO1xuICBfc294cl9xdWFsaXR5X3NwZWMocXVhbGl0eVNwZWNQdHI6IG51bWJlciwgcmVjaXBlOiBudW1iZXIsIGZsYWdzOiBudW1iZXIpOiB2b2lkO1xuICBfc294cl9kZWxheShpb1NwZWNQdHI6IG51bWJlcik6IG51bWJlcjtcbiAgX3NpemVvZl9zb3hyX2lvX3NwZWNfdCgpOiBudW1iZXI7XG4gIF9zaXplb2Zfc294cl9xdWFsaXR5X3NwZWNfdCgpOiBudW1iZXI7XG5cbiAgZ2V0VmFsdWUocHRyOiBudW1iZXIsIHR5cGU6IHN0cmluZyk6IGFueTtcbiAgc2V0VmFsdWUocHRyOiBudW1iZXIsIHZhbHVlOiBhbnksIHR5cGU6IHN0cmluZyk6IGFueTtcbiAgQXNjaWlUb1N0cmluZyhwdHI6IG51bWJlcik6IHN0cmluZztcbn1cblxuZXhwb3J0IGNvbnN0IG1lbW9pemUgPSA8VCBleHRlbmRzICguLi5hcmdzOiBhbnkpID0+IGFueT4oZmN0OiBUKSA6IFQgPT4ge1xuICBsZXQgcmVzOiBSZXR1cm5UeXBlPFQ+ID0gbnVsbDtcbiAgY29uc3QgcmVzb2x2ZXIgPSAoLi4uYXJncykgPT4ge1xuICAgIGlmIChyZXMpIHtcbiAgICAgIHJldHVybiByZXM7XG4gICAgfVxuICAgIHJlcyA9IGZjdCguLi5hcmdzKTtcbiAgICByZXR1cm4gcmVzO1xuICB9O1xuICByZXR1cm4gcmVzb2x2ZXIgYXMgVDtcbn1cblxuZXhwb3J0IGNvbnN0IGxpbWl0Q29uY3VycmVuY3kgPSA8VCBleHRlbmRzICguLi5hcmdzOiBhbnkpID0+IFByb21pc2U8YW55Pj4oZmN0OiBUKTogVCA9PiB7XG4gIGxldCBjdXJyZW50Q2FsbCA9IG51bGw7XG4gIGNvbnN0IHJlc29sdmVyID0gYXN5bmMgKC4uLmFyZ3MpID0+IHtcbiAgICBpZiAoY3VycmVudENhbGwpIHtcbiAgICAgIGF3YWl0IGN1cnJlbnRDYWxsO1xuICAgIH1cbiAgICBjdXJyZW50Q2FsbCA9IGZjdCguLi5hcmdzKTtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBjdXJyZW50Q2FsbDtcbiAgICBjdXJyZW50Q2FsbCA9IG51bGw7XG4gICAgcmV0dXJuIHJlcztcbiAgfTtcbiAgcmV0dXJuIHJlc29sdmVyIGFzIFQ7XG59XG4iXX0=